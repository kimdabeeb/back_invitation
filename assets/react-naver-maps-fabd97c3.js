import{r as o,j as a}from"./react-b146d822.js";import{_ as U}from"./load-script-13d0bea1.js";import{s as G}from"./suspend-react-49283dd8.js";import{a as R}from"./camelcase-35484e94.js";import{p as m}from"./lodash.pick-7ce4a2cb.js";import{m as V}from"./lodash.mapkeys-26a17061.js";import{u as A}from"./react-use-5b3d5927.js";import{u as Q}from"./lodash.upperfirst-0b7acb3c.js";function g(e){return Object.keys(e).reduce((t,s)=>e[s]==="undefined"?t:{...t,[s]:e[s]},{})}function X(e){return new Promise((t,s)=>{U(e,(n,i)=>{n?s(n):t(i)})})}function Y(e){const t=ee(e);return X(t).then(()=>{const n=window.naver.maps;return n.jsContentLoaded?n:new Promise(i=>{n.onJSContentLoaded=()=>{i(n)}})})}function ee(e){const t=e.submodules,s="ncpClientId"in e?`ncpClientId=${e.ncpClientId}`:"govClientId"in e?`govClientId=${e.govClientId}`:"finClientId"in e?`finClientId=${e.finClientId}`:void 0;if(!s)throw new Error("react-naver-maps: ncpClientId, govClientId or finClientId is required");let n=`https://openapi.map.naver.com/openapi/v3/maps.js?${s}`;return t&&(n+=`&submodules=${t.join(",")}`),n}var D=o.createContext({}),te=()=>o.useContext(D);async function ne(e){var t;if(typeof window<"u"&&((t=window.naver)!=null&&t.maps))return window.naver.maps;if(!e)throw new Error("react-naver-maps: set options with `useNavermaps.config`");return await Y(e)}function h(){var e;if(typeof window>"u")throw new Error("react-naver-maps: browser");if((e=window.naver)!=null&&e.maps)return window.naver.maps;const t=te();return G(ne,[t,"react-naver-maps/loadClient"])}var L=o.createContext(void 0),oe=()=>o.useContext(L);function re(e,t,s){o.useEffect(()=>{const n=(...r)=>s(...r,e),i=naver.maps.Event.addListener(e,t,n);return()=>{naver.maps.Event.removeListener(i)}},[e,t,s])}var se=e=>{const{target:t,type:s,listener:n}=e,i=oe(),r=t||i;if(!r)throw new Error("react-naver-maps: No Target to add listener");return re(r,s,n),null};function y(e){const{events:t,listeners:s}=e,n=o.useMemo(()=>ie(t),t),i=m(s,Object.keys(n));return a.jsx(a.Fragment,{children:Object.keys(i).map(r=>{const c=n[r],v=i[r];return v?a.jsx(se,{type:c,listener:v},r):null})})}function ie(e){return e.reduce((t,s)=>({[R(`on_${s}`)]:s,...t}),{})}var q=o.createContext(void 0),ae=()=>o.useContext(q);function C(e){const{element:t,children:s,autoMount:n=!0}=e,i=ae();return o.useEffect(()=>{if(n&&t.getMap()!==i)return t.setMap(i||null),()=>{t.setMap(null)}},[i]),a.jsx(L.Provider,{value:t,children:s})}var $=["strokeWeight","strokeOpacity","strokeColor","strokeStyle","strokeLineCap","strokeLineJoin","fillColor","fillOpacity","clickable","visible","zIndex"],N=[...$,"bounds"],ue=N.map(e=>`${e}_changed`),ce=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","mousemove"],le=[...ce,...ue];o.forwardRef(function(t,s){const{bounds:n}=t,i=h(),[r]=o.useState(()=>new i.Ellipse(g(m(t,[...N]))));return o.useImperativeHandle(s,()=>r),o.useEffect(()=>{r.setOptions(g(m(t,$)))},$.map(c=>t[c])),o.useEffect(()=>{n&&r.getBounds().equals(n)&&r.setBounds(n)},[n]),a.jsx(C,{element:r,children:a.jsx(y,{events:le,listeners:t})})});var x=["clickable","opacity"],ve=x.map(e=>`${e}_changed`),de=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","mousemove"],me=[...de,...ve];o.forwardRef(function(t,s){const n=m(t,x),{url:i,bounds:r}=t,c=h(),[v,f]=o.useState(()=>new c.GroundOverlay(i,r,n));return o.useImperativeHandle(s,()=>v,[v]),o.useEffect(()=>{(v.getUrl()!==i||v.getBounds().equals(r))&&f(new naver.maps.GroundOverlay(i,r,n))},[i,r]),o.useEffect(()=>{x.forEach(u=>{n[u]&&v.get(u)!==n[u]&&v.set(u,n[u])})},x.map(u=>n[u])),a.jsx(C,{element:v,children:a.jsx(y,{events:me,listeners:t})})});var I=["content","zIndex","maxWidth","pixelOffset","backgroundColor","borderColor","borderWidth","disableAutoPan","disableAnchor","anchorSkew","anchorSize","anchorColor"],W=[...I,"position"],fe=W.map(e=>`${e}_changed`),pe=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","mousemove"],ge=[...pe,...fe];o.forwardRef(function(t,s){const{position:n}=t,i=h(),[r]=o.useState(()=>new i.InfoWindow(g(m(t,[...W]))));return o.useImperativeHandle(s,()=>r),o.useEffect(()=>{r.setOptions(g(m(t,I)))},I.map(c=>t[c])),o.useEffect(()=>{n&&r.getPosition().equals(n)&&r.setPosition(n)},[n]),a.jsx(C,{element:r,autoMount:!1,children:a.jsx(y,{events:ge,listeners:t})})});function ke(e){return Object.keys(e)}function H(e){return R(`default_${e}`)}function he(e){return e.reduce((t,s)=>({...t,[H(s)]:s}),{})}var j=["animation","icon","shape","title","cursor","clickable","draggable","visible","zIndex"],P=["position"],_=he(P),T=[...j,...P],ye=T.map(e=>`${e}_changed`),Ce=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","dragstart","drag","dragend"],we=[...Ce,...ye];function be(e){const t=m(e,ke(_)),s=V(t,(i,r)=>_[r]),n=m(e,T);return g({...n,...s})}function Ee(e){return P.includes(e)}function xe(e,t){if(e===void 0)return!1;if(e===t)return!0;try{return e.equals(t)}catch{return e===t}}var tt=o.forwardRef(function(t,s){const n=h(),[i]=o.useState(()=>new n.Marker(be(t)));o.useImperativeHandle(s,()=>i);const r=A(),c=o.useRef({});c.current=v();function v(){return r?{}:T.reduce((u,d)=>{if(t[d]===void 0||Ee(d)&&t[H(d)]!==void 0)return u;const k=i.getOptions(d);return xe(k[d],t[d])?u:{...u,[d]:t[d]}},{})}function f(u){return m(c.current,u)}return o.useLayoutEffect(()=>{const{position:u}=f(["position"]);u&&i.setPosition(u)},[c.current.position]),o.useLayoutEffect(()=>{const u=f(j);Object.values(u).length<1||i.setOptions(u)},j.map(u=>c.current[u])),a.jsx(C,{element:i,children:a.jsx(y,{events:we,listeners:t})})}),z=["paths","strokeWeight","strokeOpacity","strokeColor","strokeStyle","strokeLineCap","strokeLineJoin","fillColor","fillOpacity","clickable","visible","zIndex"],Oe=z.map(e=>`${e}_changed`),$e=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","mousemove"],Ie=[...$e,...Oe];o.forwardRef(function(t,s){const n=m(t,[...z]),i=h(),[r]=o.useState(()=>new i.Polygon(n));return o.useImperativeHandle(s,()=>r),o.useEffect(()=>{r.setOptions(g(n))},z.map(c=>n[c])),a.jsx(C,{element:r,children:a.jsx(y,{events:Ie,listeners:t})})});var M=["path","strokeWeight","strokeOpacity","strokeColor","strokeStyle","strokeLineCap","strokeLineJoin","clickable","visible","zIndex","startIcon","startIconSize","endIcon","endIconSize"],je=M.map(e=>`${e}_changed`),ze=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","mousemove"],Me=[...ze,...je];o.forwardRef(function(t,s){const n=m(t,[...M]),i=h(),[r]=o.useState(()=>new i.Polyline(n));return o.useImperativeHandle(s,()=>r),o.useEffect(()=>{r.setOptions(g(n))},M.map(c=>n[c])),a.jsx(C,{element:r,children:a.jsx(y,{events:Me,listeners:t})})});var Ke=["strokeWeight","strokeOpacity","strokeColor","strokeStyle","strokeLineCap","strokeLineJoin","fillColor","fillOpacity"],K=["bounds","clickable","visible","zIndex"],Se=K.map(e=>`${e}_changed`),Le=["click","dblclick","mousedown","mouseout","mouseover","mouseup"],Pe=[...Le,...Se];o.forwardRef(function(t,s){const n=m(t,[...Ke,...K]),i=h(),[r]=o.useState(()=>new i.Rectangle(n));return o.useImperativeHandle(s,()=>r),o.useEffect(()=>{r.setOptions(g(n))},K.map(c=>n[c])),a.jsx(C,{element:r,children:a.jsx(y,{events:Pe,listeners:t})})});var S=["radius","strokeWeight","strokeOpacity","strokeColor","strokeStyle","strokeLineCap","strokeLineJoin","fillColor","fillOpacity","clickable","visible","zIndex"],Z=[...S,"center"],Te=Z.map(e=>`${e}_changed`),_e=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","mousemove"],Re=[..._e,...Te];o.forwardRef(function(t,s){const{center:n}=t,i=h(),[r]=o.useState(()=>new i.Circle(g(m(t,[...Z]))));return o.useImperativeHandle(s,()=>r),o.useEffect(()=>{n&&!r.getCenter().equals(n)&&r.setCenter(n)},[n]),o.useEffect(()=>{r.setOptions(g(m(t,S)))},S.map(c=>t[c])),a.jsx(C,{element:r,children:a.jsx(y,{events:Re,listeners:t})})});var B=o.createContext({element:null}),De=()=>o.useContext(B),qe={top:0,left:0,width:"100%",height:"100%",position:"absolute",zIndex:0};function nt({children:e,fallback:t,innerStyle:s=qe,...n}){const i=o.useRef(null),[r,c]=o.useState(!1);o.useEffect(()=>{c(!0)},[]);const v=o.useMemo(()=>({element:i.current}),[i.current]);return a.jsxs("div",{...n,style:{position:"relative",...n.style},children:[a.jsx("div",{ref:i,style:s},"mapdiv"),r&&i.current?a.jsx(B.Provider,{value:v,children:a.jsx(o.Suspense,{fallback:null,children:typeof e=="function"?o.createElement(e):e})}):t]})}function Ne(e,t){const s=o.useRef();return o.useEffect(()=>{s.current=e},t),s.current}var F=["background","baseTileOpacity","disableDoubleClickZoom","disableDoubleTapZoom","disableKineticPan","disableTwoFingerTapZoom","draggable","keyboardShortcuts","logoControl","logoControlOptions","mapDataControl","mapDataControlOptions","mapTypeControl","mapTypeControlOptions","mapTypes","maxBounds","maxZoom","minZoom","padding","pinchZoom","resizeOrigin","scaleControl","scaleControlOptions","scrollWheel","overlayZoomEffect","tileSpare","tileTransition","zoomControl","zoomControlOptions","zoomOrigin","blankTileImage"],J=["mapTypeId","size","bounds","center","zoom","centerPoint"],We=[...J.map(e=>`${e}_changed`),"mapType_changed"],He=["mousedown","mouseup","click","dblclick","rightclick","mouseover","mouseout","mousemove","dragstart","drag","dragend","touchstart","touchmove","touchend","pinchstart","pinch","pinchend","tap","longtap","twofingertap","doubletap"],Ze=["addLayer","idle","init","keydown","keyup","panning","projection_changed","removeLayer","resize","tilesloaded","zooming"],Be=[...He,...We,...Ze],E={mapTypeId:"defaultMapTypeId",size:"defaultSize",bounds:"defaultBounds",center:"defaultCenter",zoom:"defaultZoom",centerPoint:"defaultCenterPoint"},ot=o.forwardRef(function(t,s){const n=h(),{element:i}=De(),[r,c]=o.useState(),v=o.useRef();o.useLayoutEffect(()=>{if(!i)throw new Error("react-naver-maps: MapDiv is not found. Did you correctly wrap with `MapDiv`?");const u=m(t,F),d=J.reduce((l,p)=>t[E[p]]?{...l,[p]:t[E[p]]}:t[p]?{...l,[p]:t[p]}:l,{}),k=new n.Map(i,{...u,...d});return c(k),v.current=k,()=>{k.destroy()}},[]);const f=Object.keys(t).reduce((u,d)=>d in E&&t[E[d]]?u:{...u,[d]:t[d]},{});return o.useImperativeHandle(s,()=>v.current),a.jsx(a.Fragment,{children:r&&a.jsx(Fe,{...f,nmap:r})})});function Fe({nmap:e,children:t,...s}){const n=m(s,F),{mapTypeId:i,size:r,bounds:c,center:v,centerPoint:f,zoom:u}=s,d=Ne({mapTypeId:i,size:r,bounds:c,center:v,centerPoint:f,zoom:u},[i,r,c,v,f,u]);function k(l){return l.reduce((p,b)=>{const O=e[`get${Q(b)}`](),w=s[b];return!w||d&&d[b]===w||(typeof O.equals=="function"?O.equals(w):O===w)?p:{...p,[b]:w}},{})}return o.useLayoutEffect(()=>{e.setOptions(n)},[Object.values(n)]),o.useLayoutEffect(()=>{const l=k(["size"]).size;l&&e.setSize(l)},[r]),o.useLayoutEffect(()=>{const l=k(["mapTypeId"]).mapTypeId;l&&e.setMapTypeId(l)},[i]),o.useLayoutEffect(()=>{const l=k(["bounds","center","centerPoint","zoom"]);if(l.bounds){e.fitBounds(l.bounds);return}if(l.center&&l.zoom){e.morph(l.center,l.zoom);return}l.centerPoint&&e.setCenterPoint(l.centerPoint),l.center&&e.panTo(l.center,{}),l.zoom&&e.setZoom(l.zoom)},[c,v,f,u]),a.jsx(q.Provider,{value:e,children:a.jsx(L.Provider,{value:e,children:a.jsxs(a.Fragment,{children:[a.jsx(y,{events:Be,listeners:s}),t]})})})}function rt({children:e,...t}){return a.jsx(D.Provider,{value:t,children:e})}export{nt as C,tt as M,ot as N,rt as a,h as u};
