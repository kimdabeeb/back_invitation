function i(s,n,o=(r,t)=>r===t){if(s===n)return!0;if(!s||!n)return!1;const r=s.length;if(n.length!==r)return!1;for(let t=0;t<r;t++)if(!o(s[t],n[t]))return!1;return!0}const f=[];function l(s,n,o=!1,r={}){for(const e of f)if(i(n,e.keys,e.equal)){if(o)return;if(Object.prototype.hasOwnProperty.call(e,"error"))throw e.error;if(Object.prototype.hasOwnProperty.call(e,"response"))return e.response;if(!o)throw e.promise}const t={keys:n,equal:r.equal,promise:s(...n).then(e=>t.response=e).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const e=f.indexOf(t);e!==-1&&f.splice(e,1)},r.lifespan)}).catch(e=>t.error=e)};if(f.push(t),!o)throw t.promise}const u=(s,n,o)=>l(s,n,!1,o);export{u as s};
